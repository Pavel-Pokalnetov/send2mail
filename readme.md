# Email Sender Utility

![Python](https://img.shields.io/badge/python-3.7%2B-blue)
[![License](https://img.shields.io/badge/license-MIT-green)](LICENSE.md)

Утилита для отправки электронных писем с вложениями через SMTP сервер. Поддерживает аутентификацию, SSL/TLS и автоматическое формирование писем.

## Оглавление

- [Возможности](#возможности)
- [Требования](#требования)
- [Установка](#установка)
- [Использование](#использование)
- [Параметры командной строки](#параметры-командной-строки)
- [Примеры использования](#примеры-использования)
- [Коды возврата](#коды-возврата)
- [Логирование](#логирование)
- [Лицензия](#лицензия)
- [Поддержка](#поддержка)

## Возможности

- Отправка писем с несколькими вложениями
- Поддержка SMTP с аутентификацией (логин/пароль)
- Возможность использования SSL/TLS
- Автоматическое формирование текста письма
- Гибкая настройка темы и содержания письма
- Поддержка чтения текста письма из файла
- Подробное логирование операций
- Проверка валидности email-адресов и доступности файлов

## Требования

- Python 3.7 или новее
- Доступ к SMTP серверу

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/email-sender.git
cd email-sender
```

2. Установите зависимости (если есть):
```bash
pip install -r requirements.txt
```

## Использование

Основной скрипт - `email_sender.py`. Для просмотра справки выполните:

```bash
python email_sender.py -h
```

## Параметры командной строки

| Параметр | Обязательный | Описание |
|----------|--------------|----------|
| `-s`, `--server` | Да | SMTP сервер |
| `-p`, `--port` | Да | Порт SMTP сервера |
| `-t`, `--to` | Да | Email получателя |
| `-a`, `--files` | Да | Файлы для вложения (через запятую) |
| `-f`, `--from` | Нет | Email отправителя (по умолчанию admin@example.com) |
| `-j`, `--subject` | Нет | Тема письма (по умолчанию "Вам отправлен файл(ы)") |
| `-x`, `--text` | Нет | Текст письма (не использовать с --text-file) |
| `-F`, `--text-file` | Нет | Файл с текстом письма (не использовать с --text) |
| `-u`, `--auth` | Нет | Логин и пароль (user:pass) |
| `-S`, `--ssl` | Нет | Использовать SSL/TLS |

## Примеры использования

1. Простая отправка с автоматическим текстом:
```bash
python email_sender.py -s smtp.example.com -p 587 -t recipient@example.com -a file1.pdf,file2.jpg
```

2. Отправка с указанием отправителя и темы:
```bash
python email_sender.py -s smtp.example.com -p 587 -f sender@example.com -t recipient@example.com -j "Важные документы" -a document.pdf
```

3. Отправка с аутентификацией и SSL:
```bash
python email_sender.py -s smtp.example.com -p 465 -t recipient@example.com -a data.xlsx -u user:password -S
```

4. Отправка с текстом из файла:
```bash
python email_sender.py -s smtp.example.com -p 587 -t recipient@example.com -a report.pdf -F message.txt
```

## Коды возврата

Код | Описание
----|----------
0 | Успешное выполнение
1 | Ошибка аргументов командной строки
2 | Файл не найден
3 | Ошибка чтения файла
4 | Ошибка добавления вложения
5 | Ошибка подключения к SMTP серверу
6 | Ошибка аутентификации на SMTP сервере
7 | Ошибка отправки письма
8 | Невалидный email адрес
9 | Не указаны файлы для отправки
99 | Неизвестная ошибка

## Логирование

Все операции записываются в файл `email_sender.log` в формате:
```
YYYY-MM-DD HH:MM:SS - LEVEL - MESSAGE
```

Также логи выводятся в консоль.

## Формат письма

Все письма автоматически получают подпись в формате:
```
Это письмо отправлено автоматически. Отвечать на него не нужно.
Обратный адрес для связи: sender@example.com
```

Если отправитель не указан (параметр `--from`), используется адрес администратора (по умолчанию `admin@example.com`).

## Лицензия

Проект распространяется под лицензией [MIT](LICENSE.md).

## Поддержка

По вопросам использования и предложениям обращайтесь:
- Email: support@example.com
- Issues на GitHub: https://github.com/Pavel-Pokalnetov/send2mail.git